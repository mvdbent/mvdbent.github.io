<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Deploy packages during prestage with a Manifest file | AppleShare IT</title><meta name=keywords content="Deployment,macOS,Script,Bash,workflows,Jamf Pro"><meta name=description content="When you upload a package to Jamf Pro, and you are using a JCDS as a distribution point, a manifest file gets automatically created. If your environment uses an HTTPS server that is NOT a Jamf Pro HTTPS-capable distribution point to host your packages, the requirements are to create a custom manifest file and upload it along with the Signed Distribution Package into Jamf Pro.
Before we start with covering the manifest file, I want to highlight that we need a Signed Distribution Package."><meta name=author content><link rel=canonical href=https://appleshare.it/posts/use-manifest-file/><link crossorigin=anonymous href=/assets/css/stylesheet.min.5e2b4101351c21e906f398ae96901791830f58d430f96f2659dab7eaef7b3cb7.css integrity="sha256-XitBATUcIekG85iulpAXkYMPWNQw+W8mWdq36u97PLc=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://appleshare.it/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://appleshare.it/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://appleshare.it/favicon-32x32.png><link rel=apple-touch-icon href=https://appleshare.it/apple-touch-icon.png><link rel=mask-icon href=https://appleshare.it/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.110.0"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Deploy packages during prestage with a Manifest file"><meta property="og:description" content="When you upload a package to Jamf Pro, and you are using a JCDS as a distribution point, a manifest file gets automatically created. If your environment uses an HTTPS server that is NOT a Jamf Pro HTTPS-capable distribution point to host your packages, the requirements are to create a custom manifest file and upload it along with the Signed Distribution Package into Jamf Pro.
Before we start with covering the manifest file, I want to highlight that we need a Signed Distribution Package."><meta property="og:type" content="article"><meta property="og:url" content="https://appleshare.it/posts/use-manifest-file/"><meta property="og:image" content="https://appleshare.it/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-28T00:00:00+00:00"><meta property="article:modified_time" content="2023-12-28T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://appleshare.it/papermod-cover.png"><meta name=twitter:title content="Deploy packages during prestage with a Manifest file"><meta name=twitter:description content="When you upload a package to Jamf Pro, and you are using a JCDS as a distribution point, a manifest file gets automatically created. If your environment uses an HTTPS server that is NOT a Jamf Pro HTTPS-capable distribution point to host your packages, the requirements are to create a custom manifest file and upload it along with the Signed Distribution Package into Jamf Pro.
Before we start with covering the manifest file, I want to highlight that we need a Signed Distribution Package."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://appleshare.it/posts/"},{"@type":"ListItem","position":2,"name":"Deploy packages during prestage with a Manifest file","item":"https://appleshare.it/posts/use-manifest-file/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Deploy packages during prestage with a Manifest file","name":"Deploy packages during prestage with a Manifest file","description":"When you upload a package to Jamf Pro, and you are using a JCDS as a distribution point, a manifest file gets automatically created. If your environment uses an HTTPS server that is NOT a Jamf Pro HTTPS-capable distribution point to host your packages, the requirements are to create a custom manifest file and upload it along with the Signed Distribution Package into Jamf Pro.\nBefore we start with covering the manifest file, I want to highlight that we need a Signed Distribution Package.","keywords":["Deployment","macOS","Script","Bash","workflows","Jamf Pro"],"articleBody":" When you upload a package to Jamf Pro, and you are using a JCDS as a distribution point, a manifest file gets automatically created. If your environment uses an HTTPS server that is NOT a Jamf Pro HTTPS-capable distribution point to host your packages, the requirements are to create a custom manifest file and upload it along with the Signed Distribution Package into Jamf Pro.\nBefore we start with covering the manifest file, I want to highlight that we need a Signed Distribution Package. This package must be signed using a certificate that is trusted by the device at the time of enrollment. You can use a certificate generated from either the Apple Developer account or from the Jamf Pro built-in certificate authority (CA) see below instructions.\nHow to create a Signing Certificate Create Developer ID certificates Creating a Signing Certificate Using Jamf Pro’s Built-in CA Once you have the signing certificate, you can build a Signed Distribution Package. Who else rather than Scripting OS X can explain this best? Here you can find his great instruction.\nHow to Build a Signed Distribution Package On Distribution Packages Use a GitHub Repo After we have built the signed distribution package we need to make sure we can deploy the package during Automated Device Enrollment, by publishing to an open HTTPS distribution point. In this example, we are going to use GitHub as a HTTPS distribution point.\nWithin GitHub create a public repository, add a Folder and include the Signed Distribution Package you have created and want to deploy. Make sure this is committed/uploaded to the GitHub repository and that the repo is public!\nTo get the download URL you can easily go with the browser to the folder and click on the Signed Distribution Package.\nYou can click on View raw and the package will download. If you Right+Click or Ctrl+Click on View raw you can select Copy Link. To get the download URL, which looks like this\nhttps://github.com/mvdbent/Manifest/raw/main/Example-pkg/Branding-1.0-Distribution.pkg which we need to create the manifest.\nGenerate Manifest As I mentioned before, every Signed Distribution Package must have a corresponding manifest file. The manifest file is an XML property list (.plist file). This file contains the URL to download the package from an HTTPS server and other required information for the package. To use the package with a manifest, make sure that the website is accessible. Upload the package file (with a .pkg filename extension) to an area of your website where users have access.\nThe following fields are required in the file\nkind Must be set to software-package md5-size The size of the pkg in bytes md5s fingerprint (checksum) of the PKG URL The fully qualified HTTPS URL where to download the package For more information about creating and hosting a manifest file, see the Preparing to distribute in-house macOS apps in Apple’s Deployment Reference for Mac - Distribute custom packages for Mac.\nI have prepared a GitHub repository where you can find a script that creates a custom manifest. Included is a Signed Distribution Package which you can use for testing. This package will install an image at this location /Library/Desktop Pictures/LockScreen.jpg\nYou can find and download the manifest GitHub repository here\nTo create a custom manifest we need to run the CreatePKGManifest.sh script and provide a path to a local Signed Distribution Package ($1) and a download URL($2) where the same package is available for download. We need to type in the following command in the terminal\n./CreatePKGManifest.sh /path/to/local/SignedDistributionPackage downloadURL For this example we are using the Signed Distribution Package that’s included in the GitHub repo /example-pkg/Branding-1.0-Distribution.pkg. To get the download URL you can easily go with the browser to the online repository go to the Example-pkg folder and click on the Signed Distribution Package Branding-1.0-Distribution.pkg.\nTo test if this package can be downloaded, you can click on View raw and the package will download. But now we only want to have the download URL, you can Right+Click or Ctrl+Click on View raw and here you can select Copy Link. The copied link will look like this\nhttps://github.com/mvdbent/Manifest/raw/main/Example-pkg/Branding-1.0-Distribution.pkg Now we have the needed info\n/path/to/local/SignedDistributionPackage example-pkg/Branding-1.0-Distribution.pkg downloadURL https://github.com/mvdbent/Manifest/raw/main/Example-pkg/Branding-1.0-Distribution.pkg The terminal command will look like this\n./CreatePKGManifest.sh example-pkg/Branding-1.0-Distribution.pkg https://github.com/mvdbent/Manifest/raw/main/Example-pkg/Branding-1.0-Distribution.pkg Result\n\u003c!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"\u003e ","wordCount":"1189","inLanguage":"en","datePublished":"2023-12-28T00:00:00Z","dateModified":"2023-12-28T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://appleshare.it/posts/use-manifest-file/"},"publisher":{"@type":"Organization","name":"AppleShare IT","logo":{"@type":"ImageObject","url":"https://appleshare.it/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://appleshare.it/ accesskey=h title="AppleShare IT (Alt + H)">AppleShare IT</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://appleshare.it/about/ title=About><span>About</span></a></li><li><a href=https://appleshare.it/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://appleshare.it/posts/ title=Blog><span>Blog</span></a></li><li><a href=https://appleshare.it/links/ title=Links><span>Links</span></a></li><li><a href=https://appleshare.it/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Deploy packages during prestage with a Manifest file</h1><div class=post-meta>December 28, 2023&nbsp;·&nbsp;6 min</a></div></header><div class=post-content><figure class=align-center><a href=https://github.com/mvdbent/Manifest target=_blank><img loading=lazy src=/img/manifest.png#center height=300></a></figure><p>When you upload a package to Jamf Pro, and you are using a JCDS as a distribution point, a manifest file gets automatically created. If your environment uses an HTTPS server that is <span style=color:#3fc69b><strong>NOT</strong></span> a Jamf Pro HTTPS-capable distribution point to host your packages, the requirements are to create a <code>custom manifest file</code> and upload it along with the <code>Signed Distribution Package</code> into Jamf Pro.</p><p>Before we start with covering the manifest file, I want to highlight that we need a <span style=color:#3fc69b>Signed Distribution Package</span>. This package must be signed using a certificate that is trusted by the device at the time of enrollment. You can use a certificate generated from either the <code>Apple Developer account</code> or from the <code>Jamf Pro built-in certificate authority (CA)</code> see below instructions.</p><h3 id=how-to-create-a-signing-certificate>How to create a Signing Certificate<a hidden class=anchor aria-hidden=true href=#how-to-create-a-signing-certificate>#</a></h3><ul><li><a href=https://developer.apple.com/help/account/create-certificates/create-developer-id-certificates/ target=_blank rel=noopener>Create Developer ID certificates</a></li><li><a href=https://learn.jamf.com/bundle/technical-articles/page/Creating_a_Signing_Certificate_Using_Jamf_Pros_Built-in_CA_to_Use_for_Signing_Configuration_Profiles_and_Packages.html target=_blank rel=noopener>Creating a Signing Certificate Using Jamf Pro&rsquo;s Built-in CA</a></li></ul><p>Once you have the signing certificate, you can build a Signed Distribution Package. Who else rather than <a href=https://scriptingosx.com/2017/09/on-distribution-packages/ target=_blank rel=noopener><span style=color:#3fc69b>Scripting OS X</span></a> can explain this best? Here you can find his great instruction.</p><h3 id=how-to-build-a-signed-distribution-package>How to Build a Signed Distribution Package<a hidden class=anchor aria-hidden=true href=#how-to-build-a-signed-distribution-package>#</a></h3><ul><li><a href=https://scriptingosx.com/2017/09/on-distribution-packages/ target=_blank rel=noopener>On Distribution Packages</a></li></ul><h2 id=use-a-github-repo>Use a GitHub Repo<a hidden class=anchor aria-hidden=true href=#use-a-github-repo>#</a></h2><p>After we have built the signed distribution package we need to make sure we can deploy the package during Automated Device Enrollment, by publishing to an open HTTPS distribution point. In this example, we are going to use GitHub as a HTTPS distribution point.</p><p>Within GitHub create a public repository, add a Folder and include the Signed Distribution Package you have created and want to deploy. Make sure this is committed/uploaded to the GitHub repository and that the repo is <span style=color:#3fc69b>public</span>!</p><p>To get the download URL you can easily go with the browser to the folder and click on the Signed Distribution Package.</p><figure class=align-center><img loading=lazy src=/img/getURL.png#center height=300></figure><p>You can click on <code>View raw</code> and the package will download. If you Right+Click or Ctrl+Click on <code>View raw</code> you can select <code>Copy Link</code>. To get the download URL, which looks like this</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>https://github.com/mvdbent/Manifest/raw/main/Example-pkg/Branding-1.0-Distribution.pkg 
</span></span></code></pre></div><p>which we need to create the manifest.</p><h2 id=generate-manifest>Generate Manifest<a hidden class=anchor aria-hidden=true href=#generate-manifest>#</a></h2><p>As I mentioned before, every Signed Distribution Package must have a corresponding <code>manifest file</code>. The manifest file is an XML property list (.plist file). This file contains the URL to download the package from an HTTPS server and other required information for the package. To use the package with a manifest, make sure that the website is accessible. Upload the package file (with a .pkg filename extension) to an area of your website where users have access.</p><p><em>The following fields are required in the file</em></p><ul><li><span style=color:#3fc69b><strong>kind</strong></span> <em>Must be set to <code>software-package</code></em></li><li><span style=color:#3fc69b><strong>md5-size</strong></span> <em>The size of the pkg in bytes</em></li><li><span style=color:#3fc69b><strong>md5s</strong></span> <em>fingerprint (checksum) of the PKG</em></li><li><span style=color:#3fc69b><strong>URL</strong></span> <em>The fully qualified HTTPS URL where to download the package</em></li></ul><p>For more information about creating and hosting a manifest file, see the Preparing to distribute in-house macOS apps in <strong>Apple&rsquo;s Deployment Reference for Mac</strong> - <a href=https://support.apple.com/en-gb/guide/deployment/dep873c25ac4/1/web/1.0 target=_blank rel=noopener>Distribute custom packages for Mac</a>.</p><p>I have prepared a GitHub repository where you can find a script that creates a custom manifest.<figure class=align-center><img loading=lazy src=/img/folder2.png#center></figure>Included is a Signed Distribution Package which you can use for testing.
This package will install an image at this location <code>/Library/Desktop Pictures/LockScreen.jpg</code></p><p>You can find and download the manifest GitHub repository <a href=https://github.com/mvdbent/Manifest target=_blank rel=noopener><span style=color:#3fc69b>here</span></a></p><p>To create a custom manifest we need to run the <code>CreatePKGManifest.sh</code> script and provide a path to a local <code>Signed Distribution Package</code> <span style=color:#3fc69b>($1)</span> and a <code>download URL</code><span style=color:#3fc69b>($2)</span> where the same package is available for download.
We need to type in the following command in the terminal</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./CreatePKGManifest.sh /path/to/local/SignedDistributionPackage downloadURL
</span></span></code></pre></div><p>For this example we are using the Signed Distribution Package that&rsquo;s included in the GitHub repo <code>/example-pkg/Branding-1.0-Distribution.pkg</code>.
To get the download URL you can easily go with the browser to the online repository go to the Example-pkg folder and click on the Signed Distribution Package <code>Branding-1.0-Distribution.pkg</code>.</p><p>To test if this package can be downloaded, you can click on <code>View raw</code> and the package will download. But now we only want to have the download URL, you can Right+Click or Ctrl+Click on <code>View raw</code> and here you can select <code>Copy Link</code>. The copied link will look like this</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>https://github.com/mvdbent/Manifest/raw/main/Example-pkg/Branding-1.0-Distribution.pkg
</span></span></code></pre></div><p>Now we have the needed info</p><ul><li><span style=color:#3fc69b><strong>/path/to/local/SignedDistributionPackage</strong></span><ul><li><code>example-pkg/Branding-1.0-Distribution.pkg</code></li></ul></li><li><span style=color:#3fc69b><strong>downloadURL</strong></span><ul><li><code>https://github.com/mvdbent/Manifest/raw/main/Example-pkg/Branding-1.0-Distribution.pkg</code></li></ul></li></ul><p>The terminal command will look like this</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./CreatePKGManifest.sh example-pkg/Branding-1.0-Distribution.pkg https://github.com/mvdbent/Manifest/raw/main/Example-pkg/Branding-1.0-Distribution.pkg
</span></span></code></pre></div><p>Result</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-XML data-lang=XML><span style=display:flex><span><span style=color:#75715e>&lt;!DOCTYPE plist PUBLIC &#34;-//Apple//DTD PLIST 1.0//EN&#34; &#34;http://www.apple.com/DTDs/PropertyList-1.0.dtd&#34;&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;plist</span> <span style=color:#a6e22e>version=</span><span style=color:#e6db74>&#34;1.0&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;dict&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;key&gt;</span>items<span style=color:#f92672>&lt;/key&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;array&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;dict&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;key&gt;</span>assets<span style=color:#f92672>&lt;/key&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;array&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;dict&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;key&gt;</span>kind<span style=color:#f92672>&lt;/key&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;string&gt;</span>software-package<span style=color:#f92672>&lt;/string&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;key&gt;</span>md5-size<span style=color:#f92672>&lt;/key&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;integer&gt;</span>470308<span style=color:#f92672>&lt;/integer&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;key&gt;</span>md5s<span style=color:#f92672>&lt;/key&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;array&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>&lt;string&gt;</span>9363ea8eabf5d50ddf6632119d4a3c7f<span style=color:#f92672>&lt;/string&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/array&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;key&gt;</span>url<span style=color:#f92672>&lt;/key&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;string&gt;</span>https://github.com/mvdbent/Manifest/raw/main/Example-pkg/Branding-1.0-Distribution.pkg<span style=color:#f92672>&lt;/string&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;/dict&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/array&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;/dict&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/array&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/dict&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/plist&gt;</span>
</span></span></code></pre></div><p>The script created in <code>/Users/Shared/</code> the <code>manifest.plist</code> which included information like the <span style=color:#3fc69b><strong>kind</strong></span></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-XML data-lang=XML><span style=display:flex><span>            <span style=color:#f92672>&lt;key&gt;</span>kind<span style=color:#f92672>&lt;/key&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;string&gt;</span>software-package<span style=color:#f92672>&lt;/string&gt;</span>
</span></span></code></pre></div><p>the <span style=color:#3fc69b><strong>md5-size</strong></span> of the pkg in bytes</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-XML data-lang=XML><span style=display:flex><span>            <span style=color:#f92672>&lt;key&gt;</span>md5-size<span style=color:#f92672>&lt;/key&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;integer&gt;</span>470308<span style=color:#f92672>&lt;/integer&gt;</span>
</span></span></code></pre></div><p>the <span style=color:#3fc69b><strong>md5s</strong></span> fingerprint (checksum) of the PKG</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-XML data-lang=XML><span style=display:flex><span>            <span style=color:#f92672>&lt;key&gt;</span>md5s<span style=color:#f92672>&lt;/key&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;array&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>&lt;string&gt;</span>9363ea8eabf5d50ddf6632119d4a3c7f<span style=color:#f92672>&lt;/string&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/array&gt;</span>
</span></span></code></pre></div><p>and the fully qualified download <span style=color:#3fc69b><strong>URL</strong></span> where you can download the package</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-XML data-lang=XML><span style=display:flex><span>            <span style=color:#f92672>&lt;key&gt;</span>url<span style=color:#f92672>&lt;/key&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;string&gt;</span>https://github.com/mvdbent/Manifest/raw/main/Example-pkg/Branding-1.0-Distribution.pkg<span style=color:#f92672>&lt;/string&gt;</span>
</span></span></code></pre></div><p>Now we have we need to deploy the <code>Branding-1.0-Distribution.pkg</code> package during enrollment with the just created <code>custom manifest file</code>.</p><h2 id=upload-package-and-manifest-into-jamf-pro>Upload Package and manifest into Jamf Pro<a hidden class=anchor aria-hidden=true href=#upload-package-and-manifest-into-jamf-pro>#</a></h2><p>You still need to upload the <code>Branding-1.0-Distribution.pkg</code> package into Jamf Pro so you can select this within the prestage. The only thing you need to add to the package is the manifest file.</p><p>Go to <span style=color:#3fc69b>Settings -> Computer management -> Packages</span> and select <code>Branding-1.0-Distribution.pkg</code> click on <span style=color:#3fc69b>Edit</span>. Upload the <code>custom manifest file</code> and <span style=color:#3fc69b>Save</span>.</p><figure class=align-center><img loading=lazy src=/img/uploadManifest.png#center height=650></figure><p>The next step is to create a pre-stage and add the <code>Branding-1.0-Distribution.pkg</code> package to the enrollment packages.
Go to <span style=color:#3fc69b>Computers -> PreStage Enrollments</span> open an existing or create a new PreStage.</p><p>Go to the payload <span style=color:#3fc69b>Enrollment Packages</span> and add the <code>Branding-1.0-Distribution.pkg</code> package.
You can leave the <span style=color:#3fc69b>Distribution Point</span> on <strong>&ldquo;None&rdquo;</strong> because we use the download URL which is included in the manifest of the <code>Branding-1.0-Distribution.pkg</code> package.</p><p>To verify if you have the right package you must see a note below the package that says <span style=color:#3fc69b><em>This package contains a custom manifest file</em></span>.</p><figure class=align-center><img loading=lazy src=/img/PrestageManifest.png#center height=650></figure><blockquote><p><span style=color:#3fc69b>Note</span> Only add packages that are essential to the enrollment user experience to a PreStage enrollment. Too many packages may cause unexpected enrollment issues or take additional time to download if there is a poor network connection.</p></blockquote><h3 style=color:#3fc69b>The only thing for you to do is test, test test!</h2><p>Test your deployment workflow and check if the package will be installed on the device you are enrolling.</p><p>If you want to check if the installation of the <code>Branding-1.0-Distribution.pkg</code> package is successfull, you can filter the log events in the terminal, by running the following command</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>log show --info --debug --predicate <span style=color:#e6db74>&#39;subsystem == &#34;com.apple.ManagedClient&#34; AND category == &#34;MCXToolsInterface&#34;&#39;</span> --last 1h | grep com.jamf.ce.Branding 
</span></span></code></pre></div><p>As you can see I used the <code>grep</code> argument with the bundle identifier from the package to easy search. If you want to see more logs, just simply remove the category part <code>AND category == "MCXToolsInterface"</code> from the command to get more logs.
Or use the <code>/Applications/Utilities/Console.app</code> and search the <code>install.log</code> and you can always just simply look up the files, or application you want to install.
If you used the Example package <code>Branding-1.0-Distribution.pkg</code> you can check if the image is installed at this location <code>/Library/Desktop Pictures/LockScreen.jpg</code>.</p><h3 style=color:#3fc69b>Thats it!</h2><p>Hope you liked the post!</p><h2 id=resources>Resources<a hidden class=anchor aria-hidden=true href=#resources>#</a></h2><ul><li><p><a href=https://github.com/mvdbent/Manifest target=_blank rel=noopener>GitHub repo</a></p></li><li><p><a href=https://support.apple.com/en-gb/guide/deployment/dep873c25ac4/1/web/1.0 target=_blank rel=noopener>Distribute custom packages for Mac</a></p></li><li><p><a href=https://learn.jamf.com/bundle/jamf-pro-documentation-current/page/Automated_Device_Enrollment_for_Computers.html target=_blank rel=noopener>Custom manifest file</a></p></li><li><p><a href=https://developer.apple.com/help/account/create-certificates/create-developer-id-certificates/ target=_blank rel=noopener>Create Developer ID certificates</a></p></li><li><p><a href=https://learn.jamf.com/bundle/technical-articles/page/Creating_a_Signing_Certificate_Using_Jamf_Pros_Built-in_CA_to_Use_for_Signing_Configuration_Profiles_and_Packages.html target=_blank rel=noopener>Creating a Signing Certificate Using Jamf Pro&rsquo;s Built-in CA</a></p></li><li><p><a href=https://scriptingosx.com/2017/09/on-distribution-packages/ target=_blank rel=noopener>How to build a Signed Distribution Package</a></p></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://appleshare.it/tags/deployment/>Deployment</a></li><li><a href=https://appleshare.it/tags/macos/>macOS</a></li><li><a href=https://appleshare.it/tags/script/>Script</a></li><li><a href=https://appleshare.it/tags/bash/>Bash</a></li><li><a href=https://appleshare.it/tags/workflows/>workflows</a></li><li><a href=https://appleshare.it/tags/jamf-pro/>Jamf Pro</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://appleshare.it/>AppleShare IT</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>